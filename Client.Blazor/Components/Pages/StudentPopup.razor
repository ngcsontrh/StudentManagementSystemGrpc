@using Client.Blazor.Models
@using Microsoft.AspNetCore.Components
@using Shared
@rendermode InteractiveServer

<Drawer Visible="@IsVisible" Placement="right" Title="@($"{Status} Student")" OnClose="ClosePopup" Width="500">
    <Form Model="@Student"
          OnFinish="HandleOnSubmit"
          ValidateMode=@FormValidateMode.Complex
          RequiredMark=FormRequiredMark.Required>
        @if(Status == "Details" || Status == "Update" || Status == "Delete")
        {
            <FormItem Label="ID">
                <Input @bind-Value="Student.Id" Disabled />
            </FormItem>
        }
        <FormItem Label="Full Name">
            <Input @bind-Value="Student.FullName" Disabled=@(Status == "Details" || Status == "Delete") />
        </FormItem>
        <FormItem Label="Birthday">
            <DatePicker @bind-Value="Student.Birthday" Format="dd/MM/yyyy" Disabled=@(Status == "Details" || Status == "Delete") DefaultValue="DateTime.Now" />
        </FormItem>
        <Flex Gap="small">
            <FormItem Label="Class">
                <Select DataSource="@classes"
                        @bind-Value="@context.ClassId"
                        ItemValue="c => c.Id"
                        ItemLabel="c => c.Name"
                        Style="width: 120px"
                        Disabled=@(Status == "Details" || Status == "Delete")>
                </Select>
            </FormItem>
            <FormItem Label="Class Subject">
                <Select DataSource="@classes"
                        @bind-Value="@context.ClassId"
                        ItemValue="c => c.Id"
                        ItemLabel="c => c.Subject"
                        Disabled>
                </Select>
            </FormItem>
        </Flex>
        <FormItem Label="Address">
            <TextArea @bind-Value="Student.Address" MinRows="3" MaxRows="6" Disabled=@(Status == "Details" || Status == "Delete") />
        </FormItem>
        @if (Status == "Details" || Status == "Delete")
        {
            <FormItem Label="Teacher ID">
                <Input @bind-Value="Student.TeacherId" Disabled />
            </FormItem>
            <FormItem Label="Teacher Name">
                <Input @bind-Value="Student.TeacherFullName" Disabled />
            </FormItem>
            <FormItem Label="Teacher Birthday">
                <DatePicker @bind-Value="Student.TeacherBirthday" Format="dd/MM/yyyy" Disabled=@(Status == "Details" || Status == "Delete") />
            </FormItem>
        }       
        <FormItem>
            <Button Disabled=@(Status == "Details") Type="primary" HtmlType="submit">@Status</Button>
        </FormItem>
    </Form>
</Drawer>